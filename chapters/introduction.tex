\chapter{Introduction}

\emph{WARNING:}
First of all here we adopt the philosophy \emph{{\bf{TINIBA$^\reg$ is
      not a black box}}} 
and you might have some idea about what are you doing in order to make sense.
and the other thing that you have to know GNU\/Linux at basic level, 
understand something  scripting under bash and perl, 
and enjoy tiniba.

\section{Publications with tiniba}
TINIBA has been used in (at least) the following articles:
\begin{itemize}
\item J Opt Soc Am B 28 1882 (2011)
\item Mod Phys Lett B 24, 1507 (2010)
\item Opt Laser Eng 49, 668 (2011)
\item Opt Mater 29, 1 (2006)
\item Phys Rev B 73, 195330 (2006)
\item Phys Rev B 74, 075318 (2006)
\item Phys Rev B 76, 205113 (2007)
\item Phys Rev B 79, 245132 (2009)
\item Phys Rev B 80, 155205 (2009)
\item Phys Rev B 80, 201312 (2009)
\item Phys Rev B 80, 245204 (2009)
\item Phys Rev B 84, 165316 (2011)
\item Phys Rev B 84, 195326 (2011)
\item Phys Rev B 85, 165324 (2012)
\item Phys Status Solidi B 242, 3022 (2005)
\item Phys Status Solidi B 247, 1979 (2010)
\item Phys Status Solidi C 8, 2604 (2008)
\item Phys Status Solidi C 9, 1378 (2012)
\item Surf Sci 605, 941 (2011)
\end{itemize}

\section{At the begining}
The propouse of this toutorials is teaching the use of TINIBA$^\reg$ 
on \href{http://aida.cio.mx/medusaPhotos/medusaPhoto2.jpg} {\emph{Medusa}}.\\ 
Before you follow this tutorials you need to talk  Dr. Bernardo.  
Maybe you can find him in the coffe break, around 12:00 A.M.

\section{Installation  on medusa}
\begin{itemize}

\item Copy the latest version of TINIBA$^\reg$ from \\
\verb=/home/bms/tiniba/tiniba/tiniba.tar.gz=

\item Install TINIBA$^\reg$ in \verb=$$TINIBA$$/=
\begin{itemize}
\item  \verb=$$TINIBA$$/ > tar -xvf tiniba.tar.gz =
\end{itemize}
\item
Make sure that the TINIBA$^\reg$ version you may want to use is set
in \verb=utils/version-tiniba.txt=.

\item
  Make sure that the \verb=ABINIT=$^\reg$ version you may want to use is set
in \verb=utils/version-abinit.txt=.
 This information is used in\\ 
\verb=clustering:=
\verb=all_nodes.sh=, and
\verb=runSCF_19_Octubre_2009.sh=, \\and in
 \verb=utils/check_abinit.sh=.
\label{av}

\item\verb=.bashrc=

In order to run
the shells without having to give all
the route include in the file
 \verb=.bashrc=:
\begin{verbatim}
export TINIBA=$$TINIBA$$
export PATH="$$TINIBA$$:$PATH"
\end{verbatim}
Remember to read \verb=.bashrc= into the shell, or exit and enter the
shell anew.
\item a \verb=.bash_profile= is provided at \verb=$TINIBA/utils=. Put
  this in your \verb=/home/user/= and change at will, but DON'T remove
  the \verb=abinit= environment variables:\\
\verb=export I_MPI_FABRICS==\verb=shm:tcp=\\
\verb=LD_LIBRARY_PATH==\verb=$LD_LIBRARY_PATH:/usr/lib64=

\end{itemize}

\section{Administration  on medusa}

Here a list of usefull scripts:
\begin{itemize}
\item \verb=./clustering/=\textcolor{darkgreen}{run\_tiniba.sh}
\item \verb=./utils/=\textcolor{darkgreen}{checkMountQuads.sh}
\item \verb=./utils/=\textcolor{darkgreen}{createRemoteDir.sh}
\item \verb=./utils/=\textcolor{darkgreen}{limpiaSetUpAbinit.pl}
\item \verb=./utils/=\textcolor{darkgreen}{alive.sh}
\item \verb=./utils/=\textcolor{darkgreen}{apagarMedusa$_{-}0$.sh}
\item \verb=./utils/=\textcolor{darkgreen}{MakeMakefile2010.PL}
\item \verb=./utils/=\textcolor{darkgreen}{compiler.sh}

Here are some useful commands to check the running jobs:
\item \verb=cluster_exec -N QUADS ps -u usrname=
\item \verb=cluster_exec -N XEON ps -u usrname=
\item \verb=cluster_exec -N ITANIUM ps -u usrname=
\end{itemize} 
\subsection{How to : restart InfiniBand communications link }
Here you need the superuser password! 
\begin{enumerate}
\item \verb=$HOME > ssh quad01=  
\item \verb=$HOME > su=
\item \verb=$HOME > /etc/init.d/openibd stop=
\item \verb=$HOME > /etc/init.d/openibd restart=
\item To check if infiniband (only quads) is working you can run:
\textcolor{darkgreen}{infiniband.sh}
\end{enumerate}
\subsection{How to : mount  homeib}
Here you need the superuser password!  

For the \verb=quads= proceed as follows:
\begin{enumerate}
\item \verb=$HOME > ssh quad01=  
\item \verb=$HOME > su=
\item \verb=$HOME > mount master:/home /home=
\item \verb=$HOME > mount quad01ib:/homeib /homeib=
\item \verb=$HOME > exit=
\item \verb=$HOME > exit=
\end{enumerate}
and so on for the other nodes $\ldots$

You can check if the mounting is correct with:
\textcolor{darkgreen}{checkMountQuads.sh} 
